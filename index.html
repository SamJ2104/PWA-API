<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add to Homescreen</title>

    <!-- Dynamic meta tags based on URL parameters -->
    <script>
        const urlParams = new URLSearchParams(window.location.search);

        // Customize name, icon, and URL based on parameters or use defaults
        const appName = urlParams.get('name') || 'App Name';
        const appIcon = urlParams.get('icon') || 'https://icon-library.com/images/app-icon-guidelines/app-icon-guidelines-1.jpg';
        const redirectURL = urlParams.get('url');
        const iframeURL = urlParams.get('iframe'); // Fix the variable name here

        document.title = appName;

        // Add manifest link dynamically
        const manifestLink = document.createElement('link');
        manifestLink.rel = 'manifest';
        manifestLink.href = `data:application/manifest+json,${encodeURIComponent(JSON.stringify({
            "name": appName,
            "short_name": appName,
            "start_url": "/",
            "display": "standalone",
            "icons": [
                {
                    "src": appIcon,
                    "sizes": "192x192",
                    "type": "image/png"
                }
            ],
            // You can add more manifest properties here
        }))}`;
        document.head.appendChild(manifestLink);

        // Check if the page is opened as a PWA and redirect if the URL is provided
        if (window.matchMedia('(display-mode: standalone)').matches && redirectURL) {
            window.location.href = redirectURL;
        }
    </script>
    <script>
        if (iframeURL) {
            // Create an iframe element
            var iframe = document.createElement("iframe");

            // Set attributes for a full-screen iframe
            iframe.style.width = "100%";
            iframe.style.height = "100%";
            iframe.style.border = "none";
            iframe.src = iframeURL;

            // Append the iframe to the body
            document.body.appendChild(iframe);
        }
    </script>
</head>
<body>
    <h1>Add To Homescreen</h1>
    <p>Share > Add to Homescreen v2</p>
</body>
</html>